{
  "name": "worker",
  "description": "Stuff needed for a worker (importer, etc) to run",
  "json_class": "Chef::Role",
  "chef_type": "role",

  "run_list": [
    "recipe[company::github]",
    "recipe[company::ruby_app]",
    "recipe[company::app_app]",
    "recipe[ruby_build]",
    "recipe[rbenv::user]"
  ],

  "override_attributes": {
    "authorization": {
      "sudo": {
        "groups": ["admin", "sysadmin"],
        "users": ["app"],
        "passwordless": "true"
      }
    },

    "users": ["app"],
    "user": {
      "data_bag_encrypted": true
    },

    "rbenv" : {
      "rubies": ["2.0.0-p247"],
      "user_installs": [
        {
          "user": "app",
          "home": "/home/app",
          "rubies" : ["2.0.0-p247"],
          "user_rubies" : "2.0.0-p247",
          "global" : "2.0.0-p247",
          "gems": {
            "2.0.0-p247": [
              { "name": "bundler" }
            ]
          }
        }
      ]
    },

    "ruby_build": {
      "git_ref": "v20130806"
    }
  }
}
